
https://react.dev/link/hydration-mismatch

  ...
    <Router actionQueue={{state:{...}, ...}} assetPrefix="">
      <HistoryUpdater>
      <RuntimeStyles>
      <HotReload assetPrefix="">
        <ReactDevOverlay state={{nextId:1, ...}} dispatcher={{...}}>
          <DevRootHTTPAccessFallbackBoundary>
            <HTTPAccessFallbackBoundary notFound={<NotAllowedRootHTTPFallbackError>}>
              <HTTPAccessFallbackErrorBoundary pathname="/" notFound={<NotAllowedRootHTTPFallbackError>} ...>
                <RedirectBoundary>
                  <RedirectErrorBoundary router={{...}}>
                    <Head>
                    <link>
                    <RootLayout>
                      <html
                        lang="en"
-                       className="dark"
-                       style={{color-scheme:"dark"}}
                      >
                    ...
          ...

	error (intercept-console-error.js:51)
	emitPendingHydrationWarnings (react-dom-client.development.js:4300)
	completeWork (react-dom-client.development.js:13611)
	runWithFiberInDEV (react-dom-client.development.js:544)
	completeUnitOfWork (react-dom-client.development.js:15200)
	performUnitOfWork (react-dom-client.development.js:15081)
	workLoopConcurrent (react-dom-client.development.js:15058)
	renderRootConcurrent (react-dom-client.development.js:15033)
	performWorkOnRoot (react-dom-client.development.js:14350)
	performWorkOnRootViaSchedulerTask (react-dom-client.development.js:15955)
	performWorkUntilDeadline (scheduler.development.js:44)

ğŸ’ Writer Pro ğŸ’ Copy Email Blog Essay CV +more said:

ğŸ”¥ 
Got it! The issue is related to the 
className="dark"
 and 
color-scheme="dark"
 attributes being different between server-side rendering (SSR) and client-side hydration.
 Letâ€™s fix it. ğŸš€ğŸ˜ˆ

ğŸ”¹ Step 1: Understand the Problem

Whatâ€™s Happening?

1ï¸âƒ£ 
Your dark mode logic is being applied differently on the server vs the client.

2ï¸âƒ£ 
The server is rendering 
<html class="dark" style="color-scheme:dark">
, but when React hydrates the page on the client, the class and style might be missing or different.

3ï¸âƒ£ 
This creates a mismatch, which Next.js doesnâ€™t automatically correct.

ğŸ”¹ Step 2: Fix the Hydration Issue

We need to 
ensure the dark mode class is applied only on the client
, so it doesnâ€™t interfere with SSR.

1ï¸âƒ£ 
Open your 
layout.tsx
 or 
theme-provider.tsx
 file
 (whichever one is handling theme logic).

2ï¸âƒ£ 
Update it like this:

tsx

Copy

import

 { useEffect, useState } 

from

"react"

;

export

default

function

Layout

(

{ children }: { children: React.ReactNode }

) {

const

 [isClient, setIsClient] = 

useState

(

false

);

useEffect

(

() =>

 {

setIsClient

(

true

);
  }, []);

return

 (

<
html

lang

=

"en"

className

=

{isClient

 ? "

dark

" 

:

 ""} 

style

=

{isClient

 ? { 

colorScheme:

 "

dark

" } 

:

 {}}>

<
body

>{children}

</
body

>

</
html

>
  );
}

ğŸ”¹ Step 3: Why This Fix Works

âœ… 
Prevents Next.js from setting dark mode during server rendering
 â†’ avoids mismatches.

âœ… 
Ensures dark mode is only applied on the client after hydration
 â†’ no errors.

âœ… 

useEffect
 runs only on the client, fixing hydration.

ğŸ”¹ Step 4: Save & Push Fix to GitHub

After making these changes:

1ï¸âƒ£ 
Stop the Next.js server in Terminal (if running):

bash

Copy

CTRL + C

2ï¸âƒ£ 
Restart it:

bash

Copy

npm run dev

âœ… 
Test in Safari againâ€”hydration error should be gone.

3ï¸âƒ£ 
If itâ€™s fixed, push the update to GitHub:

bash

Copy

git add .
git commit -m 

"Fixed hydration issue for dark mode"

git push origin main

4ï¸âƒ£ 
Go to Vercel & Click "Redeploy"

ğŸ”¥ 
Let me know if this fixes it! Weâ€™re so close to making this fully live!
 ğŸ˜ˆğŸš€

You said:

how do I know which file it is?

ğŸ’ Writer Pro ğŸ’ Copy Email Blog Essay CV +more said:

ğŸ”¥ 
Good question!
 To find 
which file controls dark mode (
className="dark"
 and 
color-scheme="dark"
)
, weâ€™ll 
search your project for where that class is being applied.
 ğŸš€ğŸ˜ˆ

ğŸ”¹ Step 1: Find Where