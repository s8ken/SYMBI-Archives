ist
sudo chmod 000 /Library/LaunchDaemons/com.apple.AirPlayXPCHelper.plist

Password:
lcl@LCLs-MacBook-Pro ~ % sudo touch /Library/LaunchAgents/com.apple.AirPlayUIAgent.plist
sudo chmod 000 /Library/LaunchAgents/com.apple.AirPlayUIAgent.plist

lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

You said:

lcl@LCLs-MacBook-Pro ~ % ps aux | grep -E "AirPlay|screensharing|screencapture|VNC"

lcl                544   0.0  0.1 411126432  18640   ??  S     9:37am   0:00.06 /System/Library/CoreServices/AirPlayUIAgent.app/Contents/MacOS/AirPlayUIAgent --launchd
lcl                724   0.0  0.0 410742544   1744 s000  S+    9:37am   0:00.01 grep -E AirPlay|screensharing|screencapture|VNC
root               149   0.0  0.1 426968016  15632   ??  Ss    9:36am   0:00.15 /usr/libexec/AirPlayXPCHelper
lcl@LCLs-MacBook-Pro ~ % 
lcl@LCLs-MacBook-Pro ~ % 
lcl@LCLs-MacBook-Pro ~ % sudo touch /Library/LaunchDaemons/com.apple.AirPlayXPCHelper.plist
sudo chmod 000 /Library/LaunchDaemons/com.apple.AirPlayXPCHelper.plist

Password:
lcl@LCLs-MacBook-Pro ~ % sudo touch /Library/LaunchAgents/com.apple.AirPlayUIAgent.plist
sudo chmod 000 /Library/LaunchAgents/com.apple.AirPlayUIAgent.plist

lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

â Pre-Restart Check â What We Just Did

You've successfully:

Created an override for 
AirPlayXPCHelper
 and 
AirPlayUIAgent

 in 
/Library/LaunchDaemons/
 and 
/Library/LaunchAgents/

Set their permissions to 
000

, making them 
unreadable and unexecutable
 by macOS.

This should block macOS from launching AirPlay services at boot.

ð Next Step: Restart & Verify

Since launchd processes are still running, 
restart your Mac to apply these changes
 fully.

Post-Restart Checks

After restarting, run:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

â If 
nothing appears
, AirPlay has been blocked successfully.

ð¨ If 
AirPlay is still running
, 
macOS is force-loading it from another source
 and we will need a deeper override.

ð¨ Let Me Know the Results!

Does AirPlay finally stop after reboot?

Does 
ps aux
 confirm the processes are gone?

If AirPlay persists, weâll take an even deeper approach.

ð¥ Let me know what happens after restarting! ð¥

You said:

lcl@LCLs-MacBook-Pro ~ % ps aux | grep -E "AirPlay|screensharing|screencapture|VNC"

lcl                554   0.0  0.1 411127456  18512   ??  S     9:40am   0:00.07 /System/Library/CoreServices/AirPlayUIAgent.app/Contents/MacOS/AirPlayUIAgent --launchd
lcl                761   0.0  0.0 410733328   1680 s000  S+    9:40am   0:00.00 grep -E AirPlay|screensharing|screencapture|VNC
root               149   0.0  0.1 426966336  15440   ??  Ss    9:39am   0:00.14 /usr/libexec/AirPlayXPCHelper
lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

ð¨ AirPlay is STILL Running Despite Launch Daemon Override

Since both 

AirPlayUIAgent
 and 
AirPlayXPCHelper

 are 
still launching after a restart
, it means 
macOS is force-loading them outside of launchd
, likely from 
protected system processes
.

ð ï¸ Next Step â Prevent AirPlay from Running via System Permissions

Since macOS is 
ignoring launchd overrides
, let's 
completely restrict execution
 using immutable flags.

ð Step 1: Set Immutable Flags on AirPlay Binaries

Run the following commands
 to 
make AirPlay files immutable
 (so macOS can't launch them):

sh

Copy

Edit

sudo chflags uchg /System/Library/CoreServices/AirPlayUIAgent.app
sudo chflags uchg /usr/libexec/AirPlayXPCHelper

What This Does:

uchg
 (User Change Guard) 
makes the files immutable
, meaning 
macOS cannot modify, delete, or execute them.

This will 
completely prevent AirPlay from starting.

ð ï¸ Step 2: Restart and Check

After setting the immutable flags, 
restart your Mac
 and run:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

â 
If AirPlay is gone, it worked!

ð¨ 
If AirPlay is still running, macOS is force-loading it from a protected container, and weâll go even deeper.

ð