eate an MCX profile that disables AirPlay:

sh

Copy

Edit

sudo 

mkdir

 -p /Library/Managed Preferences
sudo bash -c 
'echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">
<plist version=\"1.0\">
<dict>
    <key>com.apple.airplay.receiver-enabled</key>
    <false/>
</dict>
</plist>" > /Library/Managed Preferences/com.apple.airplay.plist'

âœ… 
This creates a managed system setting that forces AirPlay to stay OFF.

ğŸ› ï¸ Step 2: Restart to Apply the Configuration Profile

Restart your Mac

After rebooting, check if AirPlay processes are still running:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

âœ… 
If nothing appears, the profile successfully disabled AirPlay.

ğŸš¨ 
If AirPlay is STILL running, macOS is ignoring the profileâ€”let me know.

ğŸš€ Let Me Know What Happens!

Does the profile disable AirPlay?

After rebooting, does 
ps aux
 still show AirPlay running?

Is the issue finally resolved, or does the icon still appear?

ğŸš€ 
If macOS ignores this profile, weâ€™ll take the final approachâ€”modifying system services at the root level. Let me know how it goes!

You said:

/System/Library/CoreServices/AirPlayUIAgent.app/Contents/MacOS/AirPlayUIAgent --launchd
root               149   0.0  0.1 426966336  15488   ??  Ss    9:32am   0:00.17 /usr/libexec/AirPlayXPCHelper
lcl@LCLs-MacBook-Pro ~ % 
lcl@LCLs-MacBook-Pro ~ % sudo mkdir -p /Library/Managed Preferences
sudo bash -c 'echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">
<plist version=\"1.0\">
<dict>
    <key>com.apple.airplay.receiver-enabled</key>
    <false/>
</dict>
</plist>" > /Library/Managed Preferences/com.apple.airplay.plist'

Password:
bash: line 7: /Library/Managed: Is a directory
lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

ğŸš¨ Fixing the Command Syntax for Creating the Managed Preferences File

The error 

/Library/Managed: Is a directory

 happens because 
a space is mistakenly placed in the directory name.

Let's fix it and properly apply the 
AirPlay restriction profile.

ğŸ› ï¸ Step 1: Correct the Managed Preferences Path

Run this 
corrected command
 to create the configuration file properly:

sh

Copy

Edit

sudo 

mkdir

 -p 

"/Library/Managed Preferences"

sudo bash -c 
'cat <<EOF > "/Library/Managed Preferences/com.apple.airplay.plist"
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>receiver-enabled</key>
    <false/>
</dict>
</plist>
EOF'

âœ… 
This will properly create the AirPlay restriction file.

ğŸ› ï¸ Step 2: Restart & Verify

Restart your Mac to apply the changes

Check if AirPlay is finally disabled:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

âœ… If 
AirPlayXPCHelper & AirPlayUIAgent are gone
, the fix worked!

ğŸš¨ If they are still there, let me know, and weâ€™ll try 
root-level blocking
 next.

ğŸš€ Let Me Know What Happens!

Does the profile successfully disable AirPlay after reboot?

Does 
ps aux
 confirm the processes are gone?

If AirPlay still runs, weâ€™ll take a deeper approach.

Let me know! ğŸš€

You said:

lcl@LCLs-MacBook-Pro ~ % ps aux | grep -E "AirPlay|screensharing|screencapture|VNC"

lcl                544   0.0  0.1 411126432  18640   ??  S     9:37am   0:00.06 /System/Library/CoreServices/AirPlayUIAgent.app/Contents/MacOS/AirPlayUIAgent --launchd
lcl                724   0.0  0.0 410742544   1744 s000  S+    9:37am   0:00.01 grep -E AirPlay|screensharing|screencapture|VNC
root               149   0.0  0.1 426968016  15632   ??  Ss    9:36am   0:00.15 /usr/libexec/AirPlayXPCHelper
lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

ğŸš¨ AirPlay is STILL Running â€“ System Profile Was Ignored

Even after applying the 
Managed Preferences configuration
,