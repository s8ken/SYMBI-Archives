t & Verify

Since launchd processes are still running, 
restart your Mac to apply these changes
 fully.

Post-Restart Checks

After restarting, run:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

âœ… If 
nothing appears
, AirPlay has been blocked successfully.

ğŸš¨ If 
AirPlay is still running
, 
macOS is force-loading it from another source
 and we will need a deeper override.

ğŸš¨ Let Me Know the Results!

Does AirPlay finally stop after reboot?

Does 
ps aux
 confirm the processes are gone?

If AirPlay persists, weâ€™ll take an even deeper approach.

ğŸ”¥ Let me know what happens after restarting! ğŸ”¥

You said:

lcl@LCLs-MacBook-Pro ~ % ps aux | grep -E "AirPlay|screensharing|screencapture|VNC"

lcl                554   0.0  0.1 411127456  18512   ??  S     9:40am   0:00.07 /System/Library/CoreServices/AirPlayUIAgent.app/Contents/MacOS/AirPlayUIAgent --launchd
lcl                761   0.0  0.0 410733328   1680 s000  S+    9:40am   0:00.00 grep -E AirPlay|screensharing|screencapture|VNC
root               149   0.0  0.1 426966336  15440   ??  Ss    9:39am   0:00.14 /usr/libexec/AirPlayXPCHelper
lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

ğŸš¨ AirPlay is STILL Running Despite Launch Daemon Override

Since both 

AirPlayUIAgent
 and 
AirPlayXPCHelper

 are 
still launching after a restart
, it means 
macOS is force-loading them outside of launchd
, likely from 
protected system processes
.

ğŸ› ï¸ Next Step â€“ Prevent AirPlay from Running via System Permissions

Since macOS is 
ignoring launchd overrides
, let's 
completely restrict execution
 using immutable flags.

ğŸš€ Step 1: Set Immutable Flags on AirPlay Binaries

Run the following commands
 to 
make AirPlay files immutable
 (so macOS can't launch them):

sh

Copy

Edit

sudo chflags uchg /System/Library/CoreServices/AirPlayUIAgent.app
sudo chflags uchg /usr/libexec/AirPlayXPCHelper

What This Does:

uchg
 (User Change Guard) 
makes the files immutable
, meaning 
macOS cannot modify, delete, or execute them.

This will 
completely prevent AirPlay from starting.

ğŸ› ï¸ Step 2: Restart and Check

After setting the immutable flags, 
restart your Mac
 and run:

sh

Copy

Edit

ps aux | grep -E 

"AirPlay|screensharing|screencapture|VNC"

âœ… 
If AirPlay is gone, it worked!

ğŸš¨ 
If AirPlay is still running, macOS is force-loading it from a protected container, and weâ€™ll go even deeper.

ğŸš¨ Let Me Know the Results!

Do the immutable flags block AirPlay after reboot?

Does 
ps aux
 confirm the processes are gone?

If AirPlay is still running, weâ€™ll disable its system service at the root level.

ğŸ”¥ 
Let me know how it goes after the restart!
 ğŸ”¥

You said:

lcl@LCLs-MacBook-Pro ~ % sudo chflags uchg /System/Library/CoreServices/AirPlayUIAgent.app
sudo chflags uchg /usr/libexec/AirPlayXPCHelper

Password:
chflags: /System/Library/CoreServices/AirPlayUIAgent.app: Operation not permitted
chflags: /usr/libexec/AirPlayXPCHelper: Operation not permitted
lcl@LCLs-MacBook-Pro ~ % 

ChatGPT said:

ğŸš¨ macOS SIP is Blocking Direct Changes

The 
â€œOperation not permittedâ€
 error means 
System Integrity Protection (SIP) is preventing modifications.

ğŸ› ï¸ Next Steps â€“ Disable SIP, Apply Changes, Re-enable SIP

To fully block AirPlay, 
we must disable SIP temporarily, apply the fixes, then re-enable SIP
.

ğŸš€ Step 1: Boot into macOS Recovery Mode

Shut down your Mac.

Turn it back on
 and 
immediately hold

Command (âŒ˜) + R

until you see the Apple logo.

When in Recovery Mode
, open 
Terminal
 from the 
Utilities menu
.

ğŸ› ï¸ Step 2: Disable SIP

In the 
Recovery Mode Terminal
, run:

sh

Copy

Edit

csrutil 

disable

âœ… 
This disables SIP, allowing us to make system modifications.

Restart your Mac normally.

ğŸ› ï¸ Step 3: Apply the AirPlay Block

Once booted back into normal macOS, 
run these commands again
:

sh

Copy

Edit

sudo chflags uchg /System/Library/CoreServices/AirPlayUIAgent.app
sudo chflags uchg /usr/libexec/AirPlayXPCHelper

âœ… 
This will now work because SIP is off.

ğŸ› ï¸ Step 4: Re-enable S