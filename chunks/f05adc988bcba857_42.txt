

Your 
Sanity setup is completely broken
 due to:

Missing exports in 
sanity.config.ts

 (e.g., 
defineConfig
 not found).

Incorrect 
structureTool
 import
 (this was removed in newer Sanity versions).

next-sanity/studio
 is not exporting 
metadata
 or 
viewport
 anymore
.

React 19 + Next.js 15 is causing issues with Sanity plugins
.

ð¥ Solution: Full Reset & Proper Sanity Setup

Let's 
completely reset Sanity
 and 
install it correctly for Next.js 15
.

ð¹ Step 1: Remove Everything Sanity-Related

Run:

bash

Copy

Edit

rm

 -rf sanity node_modules .next package-lock.json

This 
removes all broken Sanity files
 and 
clears cached builds
.

ð¹ Step 2: Reinstall Sanity Studio

Now, 
install Sanity with proper dependencies
:

bash

Copy

Edit

npm install sanity @sanity/client next-sanity @sanity/icons @sanity/image-url

â 
Fixes missing dependencies.

ð¹ Step 3: Fix 
sanity.config.ts

After reinstalling, 
open 
sanity.config.ts

:

bash

Copy

Edit

nano sanity.config.ts

Replace 
everything
 with this 
corrected version
:

ts

Copy

Edit

import

 { defineConfig } 

from

"sanity"

;

import

 { deskTool } 

from

"sanity/desk"

;

import

 { visionTool } 

from

"@sanity/vision"

;

import

 page 

from

"./schemas/page"

;

export

default

defineConfig

({

basePath

: 

"/studio"

,

projectId

: 

"your-project-id"

,

dataset

: 

"production"

,

title

: 

"Symbi Studio"

,

plugins

: [

deskTool

(), 

visionTool

()],

schema

: {

types

: [page],
  },

reactStrictMode

: 

false

, 

// Fixes React 19 issues

});

â 
Fixes missing exports (
defineConfig
) and removes 
structureTool

.

ð¹ Step 4: Fix Next.js Route for Sanity Studio

Now, 
open your Next.js Studio page file
:

bash

Copy

Edit

nano app/studio/[[...tool]]/page.tsx

Replace 
everything
 with this:

tsx

Copy

Edit

"use client"

;

import

 { 

NextStudio

 } 

from

"next-sanity/studio"

;

import

 config 

from

"../../../sanity.config"

;

export

default

function

StudioPage

(

) {

return

<
NextStudio

config

=

{config}

 />;
}

â 
Fixes metadata & viewport export errors.

ð¹ Step 5: Rebuild Everything

bash

Copy

Edit

npm install
npm run dev

â 
Your site should now load at:

http://localhost:3000

â 
Sanity Studio should open at:

http://localhost:3000/studio

ð¯ Let Me Know If This Works! ðð¥

If 
anything still fails
, send me the 
new error messages
! ð

You said:

sja@SJAs-MacBook-Pro symbi % rm -rf sanity node_modules .next package-lock.json

sja@SJAs-MacBook-Pro symbi % npm install sanity @sanity/client next-sanity @sanity/icons @sanity/image-url

npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: symbi@0.1.0
npm error Found: react@19.0.0
npm error node_modules/react
npm error   react@"^19.0.0" from the root project
npm error
npm error Could not resolve dependency:
npm error peer react@"^16.9 || ^17" from @sanity/base@2.36.2
npm error node_modules/@sanity/base
npm error   peer @sanity/base@"^2.21.0" from @sanity/vision@2.36.6
npm error   node_modules/@sanity/vision
npm error     @sanity/vision@"^2.2.6" from the root project
npm error
npm error Fix the upstream dependency conflict, or retry
npm error this command with --force or --legacy-peer-deps
npm error to accept an incorrect (and potentially broken) dependency resolution.
npm error
npm error
npm error For a full report see:
npm error /Users/sja/.npm/_logs/2025-03-20T23_52_18_332Z-eresolve-report.txt
npm error A complete log of this run can be found in: /Users/sja/.npm/_logs/2025-03-20T23_52_18_332Z-debug-0.log
sja@SJAs-MacBook-Pro symbi % nano sanity.config.ts

sja@SJAs-MacBook-Pro symbi % nano app/studio/[[...tool]]/page.tsx

zsh: no matches found: app/studio/[[...tool]]/page.tsx
sja@SJAs-MacBook-Pro symbi % 

ChatGPT said:

ð¨ Major Issue: React 19 Conflicts with Sanity

Your 
Sanity installation is failing
 because 
Sanity does not support React 19
 yet. The error is ca