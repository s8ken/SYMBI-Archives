tion|webpack/runtime/trusted types script url|webpack from pack: Error: invalid bit length repeat
<w> [webpack.cache.PackFileCacheStrategy] Restoring failed for Compilation/assets|chunkreact-refresh from pack: Error: invalid bit length repeat
<w> [webpack.cache.PackFileCacheStrategy] Restoring failed for Compilation/assets|chunkpages/_app from pack: Error: invalid bit length repeat
<w> [webpack.cache.PackFileCacheStrategy] Restoring failed for Compilation/assets|chunkpages/_error from pack: Error: invalid bit length repeat
<w> [webpack.cache.PackFileCacheStrategy] Restoring failed for CopyFilePlugin|/Users/sja/Documents/symbi-main-site/node_modules/next/dist/build/polyfills/polyfill-nomodule.js from pack: Error: invalid bit length repeat
 â¨¯ ./sanity.config.ts:2:1
Module not found: Can't resolve 'sanity'
  1 | import siteSettings from './schemas/siteSettings'
> 2 | import { defineConfig } from 'sanity'
    | ^
  3 | import { deskTool } from 'sanity/desk'
  4 | import { visionTool } from '@sanity/vision'
  5 | import page from './schemas/page'

https://nextjs.org/docs/messages/module-not-found

Import trace for requested module:
./app/studio/[[...index]]/page.tsx
 GET /studio 500 in 2009ms
 â¨¯ ./sanity.config.ts:2:1
Module not found: Can't resolve 'sanity'
  1 | import siteSettings from './schemas/siteSettings'
> 2 | import { defineConfig } from 'sanity'
    | ^
  3 | import { deskTool } from 'sanity/desk'
  4 | import { visionTool } from '@sanity/vision'
  5 | import page from './schemas/page'

https://nextjs.org/docs/messages/module-not-found

Import trace for requested module:
./app/studio/[[...index]]/page.tsx

ChatGPT said:

Thanks for the full error trace â you're really close! Let's squash these two core issues cleanly:

âï¸ PRIMARY ISSUES

â 
Issue 1: 
Module not found: Can't resolve 'sanity'

This means 
sanity
 is not properly installed, or was removed during a package shuffle.

â 
Issue 2: Corrupted Webpack Cache ("invalid bit length repeat")

This happens when 
.next/cache
 becomes corrupted â totally fixable.

ð§¼ 
STEP-BY-STEP FIX

â 1. 
Delete 
.next
 and corrupted cache

bash

Copy

Edit

rm

 -rf .next

You can also clean NPM if needed:

bash

Copy

Edit

rm

 -rf node_modules package-lock.json
npm cache clean --force

â 2. 
Reinstall All Dependencies

Ensure you're using the right compatible versions of everything:

bash

Copy

Edit

npm install --legacy-peer-deps

This ensures compatibility, especially for Sanity v3+ with Next.js 15 and React 18.

â 3. 
Install Sanity Core Packages

Now re-install the missing 
sanity
 packages:

bash

Copy

Edit

npm install sanity @sanity/vision @sanity/client @sanity/image-url next-sanity --legacy-peer-deps

â 4. 
Restart Dev Server

Once all installs are complete:

bash

Copy

Edit

npm run dev

Then open:

ð 

http://localhost:3001/studio

ð Recap

Problem

Solution

Can't resolve 'sanity'

Reinstall with 
npm install sanity ...

invalid bit length repeat

Delete 
.next
 + clear 
node_modules

Studio 404 or 500

Ensure 
[[...index]]/page.tsx
 exists and points to 
sanity.config.ts

â Verify This File Exists

app/studio/[[...index]]/page.tsx
:

tsx

Copy

Edit

"use client"

;

import

 { 

NextStudio

 } 

from

"next-sanity/studio"

;

import

 config 

from

"../../../sanity.config"

;

export

default

function

StudioPage

(

) {

return

<
NextStudio

config

=

{config}

 />;
}

Try those steps in order and let me know â Iâll stay with you through the fix. You're on the home stretch now ðªð

You said:

haven't installed core package yet: sja@SJAs-MacBook-Pro symbi-main-site % rm -rf node_modules package-lock.json
npm cache clean --force

npm warn using --force Recommended protections disabled.
sja@SJAs-MacBook-Pro symbi-main-site % npm install --legacy-peer-deps

added 365 packages, and audited 366 packages in 1m

66 packages are looking for funding
  run 
npm fund
 for details

8 moderate severity vulnerabilities

To address i